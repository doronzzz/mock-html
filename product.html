<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>

		<link rel="stylesheet" href="style.css"/>

		<script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.js">
		</script>


		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

		<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700italic,700,900italic,900' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

		<script>
			$(function(){
				$('.sign-in').on('click',function(){
					$('body').toggleClass('show-login-dialog');
				});

				$('.close-sign-in').on('click',function(){
					$('body').removeClass('show-login-dialog');
				});

				$('.modal-overlay').on('click',function(){
					$('body').removeClass('show-login-dialog');
				})

			})
			
		</script>

	</head>

	<body>

		<div class="modal-overlay"></div>



		<div class="top-bar container">
			<div class="pull-right">

				<div class="">
					
						<span class="contact-us">
							<i class="glyphicon glyphicon-envelope"></i>
							Contact Us
						</span>
					
					
						<span class="cart">
							<i class="glyphicon glyphicon-shopping-cart"></i>
							Cart 
						</span>
					
						<span class="login" id="login-wrapper">

							<span class="logged-in">
								<i class="glyphicon glyphicon-user"></i>
								 Sign Out
							</span>

							<span class="btn btn-primary btn-sm sign-in">
								Sign In
							</span>



							<div class="login-dialog">
								<div class="close-dialog  pull-right">
									<i class="fa fa-close"></i>
								</div>

								<div class="">
									<input class="form-control" type="text" placeholder="Enter ID or Mobile #"/>
								</div>

								<div class="">
									<input class="form-control" type="password" placeholder="Password"/>
								</div>

								<div class="">
										<input class=""  type="checkbox" id="remember-me"/>
										<label for="remember-me" class="text-muted">
											Remember me on this computer
										</label>
								</div>

								<div class="btn btn-primary btn-lg btn-block">
									Sign in
								</div>

								<label class="helper-text text-muted">
									Don't have an account yet?
									<a> Sign up now!</a>
								</label>

							</div>

						</span>
					
				</div>

			</div>
		</div>
		<nav class="navbar navbar-default navbar-top">
		  <div class="container">
		    <div class="navbar-header">
		      <a class="navbar-brand" href="index.html">
		        <img alt="Brand" src="resources/logo.png" style="height:30px;">
		      </a>
		    </div>

		    <ul class="nav navbar-nav">
		    	<li class="active"><a href="#">Shop</a></li>
		    	<li><a href="#">Support</a></li>
		    	<li class="myNewComMenuItem">
		    		<a href="#">
			    		My NewCom
		    		<span class="icons">
			    			<i class="glyphicon glyphicon-menu-up"></i>
		    				<i class="glyphicon glyphicon-menu-down"></i>
		    		</span>
		    		</a>
		    	</li>
		    </ul>



		    <div id="myNewComMenu">
		    	<div class="row">
		    		<div class="col-md-3">
		    			<div class="header">Your plan & bills</div>
		    			<div class="links">
		    				<div>Recent Bills</div>
		    				<div>What you've used</div>
		    				<div id="goToContract">Contract Details</div>
		    			</div>
		    		</div>
		    		<div class="col-md-3">
		    			<div class="header">Ways to pay</div>
		    			<div class="links">
		    				<div>Make a payment</div>
		    				<div>Manage your Direct Debit</div>
		    				<div>Top up</div>
		    			</div>
		    		</div>
		    		<div class="col-md-3">
		    			<div class="header">Settings</div>
		    			<div class="links">
		    				<div>Account Settings</div>
		    				<div>Your Details</div>
		    				<div>Password & Security</div>
		    			</div>
		    		</div>
		    		<div class="col-md-3">
		    			<div class="header">Take Control</div>
		    			<div class="links">
		    				<div>Download the App</div>
		    				<div>&nbsp;</div>
		    				<div>&nbsp;</div>
		    			</div>
		    		</div>
		    	</div>
		    </div>

		  </div>
		</nav>

		<div class="container">



		<div class="product-main-banner">

		  <!-- Wrapper for slides -->

		 


		</div>


		</div>
		<footer>

			<div class="container">
				<div class="row">
					
					<div class="col-md-3">
						<h3>SHOP</h3>
						<div class="link-list">
							<a class="color-blue">All Phones iPhone</a>
							<a class="color-blue">AndroidTM-Powered Phones</a>
							<a class="color-blue">PayLo Talk & Text Phones </a>
							<a class="color-blue">Broadband2Go </a>
							<a class="color-blue">Devices Acce</a>
						</div>
					</div>

					<div class="col-md-3">
						<h3>NO CONTRACT PLANS</h3>
						<div class="link-list">   
							<a class="color-blue">All Plans</a>
							<a class="color-blue">NewCom Mobile Unlimited Plans</a>
							<a class="color-blue">payLo Talk & Text Plans</a>
							<a class="color-blue">Broadband2Go Plans</a>
							<a class="color-blue">Internetional Offers</a>
							<a class="color-blue">NewCom Mobile Extras</a>
						</div>
					</div>

					<div class="col-md-3">
						<h3>SOME USEFUL LINK</h3>
						<div class="link-list">     
							<a class="color-blue">Find A Store</a>
							<a class="color-blue">Contact Us</a>
							<a class="color-blue">Coverage Map</a>
							<a class="color-blue">Sitemap</a>
							<a class="color-blue">Support</a>
							<a class="color-blue">About us</a>
							<a class="color-blue">Careers</a>
							<a class="color-blue">News</a>
						</div>
					</div>

					<div class="col-md-3">
						<h3>CONNECT WITH US</h3>
						<div class="social">
							<div class="social-btn">
								<i class="fa fa-facebook"></i>
							</div>
							<div class="social-btn">
								<i class="fa fa-twitter"></i>
							</div>
							<div class="social-btn">
								<i class="fa fa-youtube"></i>
							</div>
							<div class="social-btn">
								<i class="fa fa-instagram"></i>
							</div>
						</div>
					</div>

				</div>
			</div>

		</footer>


		<script src="mods.js" type="text/javascript"></script>
		<script src="app.js"></script>
		<script>

			$('.sign-in').on('click',function(){
				$('body').toggleClass('show-login-dialog');
			});	

			$(document).on('click','.close-dialog', function(){
				$('body').removeClass('thanksDialog');
				if($('.thankYouMsg').length !== 0){
					$('.thankYouMsg').remove();
				}
			});

			$(document).on('click','.modal-overlay', function(){
				$('body').removeClass('thanksDialog');
				if($('.thankYouMsg').length !== 0){
					$('.thankYouMsg').remove();
				}
			});

			// http://192.168.8.207/api/web/show-offer.php?maCode=OOD_HS_Upgrade_Personal_NoPref_SamsungS5_2Gb&subscriberId=1463386475157_Mozilla%2F5.0_(Windows_NT_6.1%3B_WOW64)_AppleWebKit%2F537.36_(KHTML%2C_like_Gecko)_Chrome%2F50.0.2661.94_Safari%2F537.36&isStarted=false
			var sFields = UserSession.getUserInfo()
			var myParams = QueryString;
			var fields = (sFields.sessionFields) ? sFields.sessionFields : [];
			
			for(var i = 0; i<fields.length; i++){
				if(fields[i].name === "msisdn"){
					myParams.msisdn = fields[i].value;
				}
			}

			if(!myParams.subscriberId){
				myParams.subscriberId = window.localStorage.getItem('subId');				
			}

			$.ajax({
				  url: API.endPoints.showOffer.url,
				  type: "get", //send it through get method
				  data:myParams,
				  success: function(response,status,xhr) {
				    //Do Something
				    var obj = JSON.parse(response);

				    //if error do nothing.
				    if(obj.status.success === "false"){
				    	return;
				    }

				    // var str = obj.offer.moreDetailsBannerID;
				    // obj.offer.moreDetailsBannerID = str.replace('png','jpg');

					var source = $("#offer_item_template").html();
					var template = Handlebars.compile(source);
					var context = obj;
					var html = template(context);
					$('body .product-main-banner').append(html);
					$('.item .rounded-btn').on('click',function(e){
						var optin = $(e.target).attr('data-optin');
						var subId = UserSession.getUserInfo().subId;
						var msisdn = UserSession.getField('msisdn');
						var myData = {subscriberId:subId};
						if(msisdn){
							myData.msisdn = msisdn.value;
						}

						myData.optinCode = optin;
						
						$.ajax({
							type:"post",
							url:"/api/web"+API.endPoints.optIn.url,
							data:myData,
							success:function(res,status,xhr){
								var source = $("#thanks-modal").html();
								var template = Handlebars.compile(source);
								var html = template();
								$('body').append(html);
								$('body').addClass('thanksDialog');
								$('#thanksBtn').on('click',function(e){
									window.location.href = "/";
								});
							}
						});

					});

				  },

				  error: function(xhr) {
				    //Do Something to handle error
				  }
				});

		</script>

		<script type="x-handlebars-template" id="offer_item_template">
			
		   <div class="item active" style="background:url({{offer.moreDetailsBannerID}}); height:549px; background-size:cover; padding:32px;position:relative;">
		   				<div class="ribbon">
		   					Especially For You!
		   				</div>
				    	<h3 class="" style="color:#fff;font-size:32px; text-align:left; position:relative; top:20px; text-shadow: 1px 2px 1px #333;">
				    		{{offer.title}}
				    	</h3>
						<div class="row">
							<div class="">
								<div>									
									<h3 class="blue-color">
										{{offer.effortText}}
									</h3>

									<h5 class="benefit">
										<div class="benefitTextIntro">
											When Joining
										</div>
										<span>
											{{offer.benefitText}}
										</span>
									</h5>

									<h5 class="price">
										Only {{offer.price}} EUR / month
									</h5>

									<div class="btn btn-success rounded-btn" data-optin="{{offer.optinCode}}">{{offer.buttonText}}</div>

									<div style="padding:0px 40px;" class="validFor">
										<small class="text-muted">
										Hurry Up! - offer is valid until	{{offer.validFor}}
										</small>
									</div>


								</div>
								
							</div>
						</div>
				    </div>

		</script>


		<script type="text/x-handlerbars-template" id="thanks-modal">
			

			<div class="thankYouMsg">
				<div class="close-dialog pull-right">
					<i class="fa fa-close"></i>
				</div>

				<h4>
					Thank you!
				</h4>

				<div class="thanksIcon color-blue blue-color">
					<i class="glyphicon glyphicon-ok"></i>
				</div>

				<div class="btn btn-primary btn-lg btn-block" id="thanksBtn">
					CLOSE
				</div>
			</div>

		</script>

		
	</body>

</html>


